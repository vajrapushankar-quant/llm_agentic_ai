{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///E:/Projects/QuantumRush/Landing%20Pages/llm_agentic/app/api/create-order/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport Razorpay from \"razorpay\";\r\n\r\n// Price map in paise (smallest currency unit)\r\nconst priceMap: Record<number, number> = {\r\n  1: 1499900, // ₹14,999\r\n  2: 1999900, // ₹19,999\r\n  3: 2499900, // ₹24,999\r\n};\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    // Initialize Razorpay with environment variables\r\n    // Use test keys for local, live keys for production\r\n    const razorpayKeyId = process.env.NEXT_PUBLIC_RAZORPAY_KEY_ID || \"rzp_test_RnaJg6IBlcJkrk\";\r\n    const razorpayKeySecret = process.env.RAZORPAY_KEY_SECRET || \"zeLEGY2Ykm5WMcoEWp21WCAr\";\r\n\r\n    const razorpay = new Razorpay({\r\n      key_id: razorpayKeyId,\r\n      key_secret: razorpayKeySecret,\r\n    });\r\n    const body = await request.json();\r\n    const { planId, planName, customerName, customerEmail, customerPhone } = body;\r\n\r\n    if (!planId || !priceMap[planId]) {\r\n      return NextResponse.json(\r\n        { error: \"Invalid plan ID\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const amount = priceMap[planId];\r\n\r\n    // Create Razorpay order\r\n    const order = await razorpay.orders.create({\r\n      amount: amount, // Amount in paise\r\n      currency: \"INR\",\r\n      receipt: `order_${planId}_${Date.now()}`,\r\n      notes: {\r\n        planId: planId.toString(),\r\n        planName: planName,\r\n        customerName: customerName,\r\n        customerEmail: customerEmail,\r\n        customerPhone: customerPhone,\r\n      },\r\n    });\r\n\r\n    return NextResponse.json({\r\n      orderId: order.id,\r\n      amount: order.amount,\r\n      currency: order.currency,\r\n      keyId: razorpayKeyId,\r\n    });\r\n  } catch (error: any) {\r\n    console.error(\"Error creating Razorpay order:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Failed to create order\", details: error.message },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,8CAA8C;AAC9C,MAAM,WAAmC;IACvC,GAAG;IACH,GAAG;IACH,GAAG;AACL;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,iDAAiD;QACjD,oDAAoD;QACpD,MAAM,gBAAgB,QAAQ,GAAG,CAAC,2BAA2B,IAAI;QACjE,MAAM,oBAAoB,QAAQ,GAAG,CAAC,mBAAmB,IAAI;QAE7D,MAAM,WAAW,IAAI,yJAAQ,CAAC;YAC5B,QAAQ;YACR,YAAY;QACd;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,aAAa,EAAE,aAAa,EAAE,GAAG;QAEzE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,EAAE;YAChC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkB,GAC3B;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,SAAS,QAAQ,CAAC,OAAO;QAE/B,wBAAwB;QACxB,MAAM,QAAQ,MAAM,SAAS,MAAM,CAAC,MAAM,CAAC;YACzC,QAAQ;YACR,UAAU;YACV,SAAS,CAAC,MAAM,EAAE,OAAO,CAAC,EAAE,KAAK,GAAG,IAAI;YACxC,OAAO;gBACL,QAAQ,OAAO,QAAQ;gBACvB,UAAU;gBACV,cAAc;gBACd,eAAe;gBACf,eAAe;YACjB;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS,MAAM,EAAE;YACjB,QAAQ,MAAM,MAAM;YACpB,UAAU,MAAM,QAAQ;YACxB,OAAO;QACT;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAA0B,SAAS,MAAM,OAAO;QAAC,GAC1D;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}